{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://20-20-20/./src/utils/index.ts","webpack://20-20-20/external commonjs \"vscode\"","webpack://20-20-20/webpack/bootstrap","webpack://20-20-20/./src/extension.ts"],"sourcesContent":["String.prototype.p2 = function () {\n  return this.padStart(2, \"0\");\n};\n/**\n * 把时间格式化为 \"ss\", \"mm\", \"mm:ss\", \"HH:mm\", \"HH:mm:ss\"\n * @param format 显示时间格式\n * @param time 时间, 单位秒\n * @returns\n */\nexport function formateDate(format: string, time: number) {\n  let { d, h, m, s, ms } = getTime(time * 1000);\n  if (format === \"ss\") {\n    return `${s + m * 60 + h * 60 * 60 + d * 24 * 60 * 60}`.p2() + \"s\";\n  } else if (format === \"mm\") {\n    return `${m + h * 60 + d * 24 * 60}`.p2() + \"m\";\n  } else if (format === \"mm:ss\") {\n    return `${m + h * 60 + d * 24 * 60}`.p2() + \":\" + `${s}`.p2();\n  } else if (format === \"HH:mm\") {\n    return `${h}`.p2() + \":\" + `${m + h * 60 + d * 24 * 60}`.p2();\n  } else if (format === \"HH:mm:ss\") {\n    return `${h}`.p2() + \":\" + `${m}`.p2() + \":\" + `${s}`.p2();\n  } else {\n    return format;\n  }\n}\n\n// time 单位毫秒\nfunction getTime(time: number) {\n  let ms = time % 1000;\n  let s = time / 1000;\n  let m = s / 60;\n  let h = m / 60;\n  let d = h / 24;\n\n  s = s % 60 | 0;\n  m = m % 60 | 0;\n  h = h % 24 | 0;\n  d = d | 0;\n\n  d = d > 0 ? d : 0;\n  h = h > 0 ? h : 0;\n  m = m > 0 ? m : 0;\n\n  return { d, h, m, s, ms };\n}\n\nexport function checkTimeFormat(time: string): boolean {\n  let test = /^[1-9](\\d*)(\\.[0-9]{0,2})?[hms]$/.test(time);\n  return test;\n}\n\n/**\n *\n * @param time 时间 20m, 1h, 30s\n */\nexport function getSecond(time: string) {\n  if (!checkTimeFormat(time)) {\n    return 0;\n  }\n  let end: string = time.slice(-1);\n  let numString = time.match(/^[1-9](\\d*)(\\.[0-9]{0,2})?/);\n  if (!numString) {\n    return 0;\n  }\n  let num = parseFloat(numString[0]);\n  if (end === \"s\") {\n    return num;\n  } else if (end === \"m\") {\n    return num * 60;\n  } else if (end === \"h\") {\n    return num * 60 * 60;\n  } else {\n    return 0;\n  }\n}\n","module.exports = require(\"vscode\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import * as vscode from \"vscode\";\nlet myStatusBarItem: vscode.StatusBarItem;\nimport { getSecond, formateDate, checkTimeFormat } from \"./utils\";\nlet timer: any = null;\nlet time: number = 0;\nlet isWorking: boolean = true;\nconst CANCEL_TIMER_LABEL = \"$(close) Cancel timer\";\nconst RESET_TIMER_LABEL = \"$(clock) Reset timer\";\nconst ERROE_MESSAGE = 'Please input a valid time, such as \"20m\", \"1h\", \"30s\"';\n\nexport function activate(context: vscode.ExtensionContext) {\n  const { subscriptions } = context;\n  let {\n    format,\n    workingTime,\n    breakingTime,\n    showInformation,\n    message,\n    priority,\n  } = vscode.workspace.getConfiguration(\"20-20-20\");\n  if (!checkTimeFormat(workingTime) || !checkTimeFormat(breakingTime)) {\n    vscode.window.showInformationMessage(ERROE_MESSAGE);\n  }\n  time = getSecond(workingTime) || 20 * 60; // 默认20分钟\n  let startDisposable = vscode.commands.registerCommand(\n    \"20-20-20.start\",\n    () => {\n      start();\n    }\n  );\n  let cancelDisposable = vscode.commands.registerCommand(\n    \"20-20-20.cancel\",\n    () => {\n      cancel();\n    }\n  );\n  let restartDisposable = vscode.commands.registerCommand(\n    \"20-20-20.restart\",\n    () => {\n      restart();\n    }\n  );\n  let clickDisposable = vscode.commands.registerCommand(\n    \"20-20-20._timer-click\",\n    async () => {\n      const option = await vscode.window.showQuickPick(\n        [CANCEL_TIMER_LABEL, RESET_TIMER_LABEL],\n        { canPickMany: false }\n      );\n      if (!option) {\n        return;\n      }\n      if (option === CANCEL_TIMER_LABEL) {\n        cancel();\n      } else if (option === RESET_TIMER_LABEL) {\n        restart();\n      }\n    }\n  );\n\n  myStatusBarItem = vscode.window.createStatusBarItem(\n    vscode.StatusBarAlignment.Right,\n    priority\n  );\n  myStatusBarItem.command = \"20-20-20._timer-click\";\n\n  function showTimer() {\n    let text = formateDate(format, time);\n    myStatusBarItem.text = text;\n    if (time === 0 && isWorking && showInformation) {\n      vscode.window.showInformationMessage(message, \"Got It!\");\n    }\n    if (time === 0) {\n      time = getSecond(isWorking ? breakingTime : workingTime);\n      isWorking = !isWorking;\n      return;\n    }\n    time--;\n    myStatusBarItem.show();\n  }\n\n  function start() {\n    if (timer) return;\n    timer = setInterval(showTimer, 1000);\n    myStatusBarItem.show();\n  }\n  function restart() {\n    isWorking = true;\n    clearInterval(timer);\n    time = getSecond(workingTime);\n    showTimer();\n    timer = setInterval(showTimer, 1000);\n    myStatusBarItem.show();\n  }\n  function cancel() {\n    if (!timer) return;\n    clearInterval(timer);\n    timer = null;\n    myStatusBarItem.hide();\n  }\n  start();\n  subscriptions.push(myStatusBarItem);\n  subscriptions.push(startDisposable);\n  subscriptions.push(cancelDisposable);\n  subscriptions.push(restartDisposable);\n  subscriptions.push(clickDisposable);\n  subscriptions.push(\n    vscode.workspace.onDidChangeConfiguration((e) => {\n      if (e.affectsConfiguration(\"20-20-20\")) {\n        format = vscode.workspace.getConfiguration(\"20-20-20\").get(\"format\");\n        workingTime = vscode.workspace\n          .getConfiguration(\"20-20-20\")\n          .get(\"workingTime\");\n        breakingTime = vscode.workspace\n          .getConfiguration(\"20-20-20\")\n          .get(\"breakingTime\");\n        if (!checkTimeFormat(workingTime) || !checkTimeFormat(breakingTime)) {\n          vscode.window.showInformationMessage(ERROE_MESSAGE);\n        } else {\n          time = getSecond(isWorking ? workingTime : breakingTime);\n        }\n        showInformation = vscode.workspace\n          .getConfiguration(\"20-20-20\")\n          .get(\"showInformation\");\n        message = vscode.workspace.getConfiguration(\"20-20-20\").get(\"message\");\n        let newPriority: number = vscode.workspace\n          .getConfiguration(\"20-20-20\")\n          .get(\"priority\") as number;\n        if (newPriority !== priority) {\n          myStatusBarItem.dispose();\n          myStatusBarItem = vscode.window.createStatusBarItem(\n            vscode.StatusBarAlignment.Right,\n            newPriority\n          );\n          subscriptions.push(myStatusBarItem);\n        }\n      }\n    })\n  );\n}\n\nexport function deactivate() {\n  clearInterval(timer);\n}\n"],"names":["checkTimeFormat","time","test","String","prototype","p2","this","padStart","format","d","h","m","s","ms","getTime","end","slice","numString","match","num","parseFloat","module","exports","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","myStatusBarItem","timer","isWorking","CANCEL_TIMER_LABEL","RESET_TIMER_LABEL","ERROE_MESSAGE","context","subscriptions","workingTime","breakingTime","showInformation","message","priority","vscode","workspace","getConfiguration","window","showInformationMessage","getSecond","startDisposable","commands","registerCommand","start","cancelDisposable","cancel","restartDisposable","restart","clickDisposable","async","option","showQuickPick","canPickMany","showTimer","text","formateDate","show","setInterval","clearInterval","hide","createStatusBarItem","StatusBarAlignment","Right","command","push","onDidChangeConfiguration","e","affectsConfiguration","get","newPriority","dispose"],"sourceRoot":""}